# 增强系统测试指南

## 🚀 系统启动确认

✅ **服务器状态**: Next.js 开发服务器已启动并运行在端口 3000
✅ **增强功能**: 数据持久化和备份系统已就绪
✅ **目录结构**: data/, data/backups/, data/exports/ 目录已创建

## 📋 测试步骤

### 1. 基础功能测试

访问以下页面验证系统运行状态：

```
🔗 http://localhost:3000/test-enhanced
```

这个页面将显示：
- ✅ 系统健康状态
- ✅ 数据库文件状态  
- ✅ 增强功能启用状态
- 🧪 功能测试按钮

### 2. 核心页面测试

| 页面 | URL | 功能描述 |
|------|-----|----------|
| 📊 测试页面 | `/test-enhanced` | 系统状态和基础测试 |
| 🔧 管理控制台 | `/admin` | 候选人管理、面试控制 |
| 📝 评委评分 | `/judge` | 评委登录和评分 |
| 📺 大屏展示 | `/display` | 候选人信息展示 |
| 🚀 增强测试 | `/admin/enhanced` | SSE连接和高级功能 |

### 3. 增强功能测试

#### A. 数据持久化测试
1. 访问 `/admin` 添加一些候选人数据
2. 重启服务器: `Ctrl+C` 然后 `npm run dev`
3. 检查数据是否仍然存在

#### B. 备份功能测试
1. 访问 `/test-enhanced`
2. 点击"创建备份"按钮
3. 查看 `data/backups/` 目录中的备份文件

#### C. SSE连接测试
1. 访问 `/admin/enhanced`
2. 观察SSE连接状态
3. 测试自动重连功能

### 4. 命令行工具

```bash
# 检查系统状态
node scripts/check-status.js

# 查看数据目录
ls -la data/

# 查看备份文件
ls -la data/backups/

# 查看数据文件内容
cat data/scoring-data.json | head -20
```

## 🔍 验证要点

### 数据持久化验证
- [ ] 数据文件自动创建在 `data/scoring-data.json`
- [ ] 服务器重启后数据保持
- [ ] 候选人、评委、评分数据完整

### 备份系统验证  
- [ ] 手动备份成功创建
- [ ] 备份文件包含完整数据
- [ ] 备份文件自动清理（保留10个）

### 网络稳定性验证
- [ ] SSE连接自动建立
- [ ] 连接中断后自动重连
- [ ] 心跳检测正常工作

### 并发能力验证
- [ ] 多个浏览器标签同时连接
- [ ] 评委和管理员同时在线
- [ ] 连接状态实时更新

## 🐛 常见问题

### 问题1: 数据文件未创建
**解决**: 访问任意页面触发数据初始化，或重启服务器

### 问题2: 备份按钮无响应  
**解决**: 检查 `data/backups/` 目录权限，确保可写

### 问题3: SSE连接失败
**解决**: 检查浏览器控制台错误，可能需要刷新页面

### 问题4: 端口占用
**解决**: 使用 `lsof -i :3000` 检查端口使用情况

## 📊 性能基准

预期性能指标：
- **数据保存延迟**: < 100ms
- **备份创建时间**: < 500ms  
- **SSE重连时间**: 3-30秒
- **文件大小**: < 1MB (1000名候选人)

## 🎯 测试成功标准

✅ 所有页面正常加载
✅ 数据持久化功能正常
✅ 备份创建和恢复正常
✅ SSE连接稳定，支持自动重连
✅ 多用户并发访问正常

---

**下一步**: 如果基础测试通过，可以进行生产环境部署准备。